@using Collections.Web.Models.ApplicationUser
@using Microsoft.AspNetCore.Mvc.TagHelpers
@using Collections.Shared.Constants.Identity
@model IEnumerable<Collections.Web.Models.ApplicationUser.ApplicationUserViewModel>

<!DOCTYPE html>

<html>
<head>
    <title>title</title>
</head>
<body>
<div class="container">
    <div class="table-responsive">
        <table class="table">
            <thead>
            <tr>
                <td>
                    Id
                </td>
                <td>
                    Full Name
                </td>
                <td>
                    Roles
                </td>
                <td>
                    Status
                </td>
                <td>
                    Actions
                </td>
            </tr>
            </thead>
            <tbody>
            @foreach (var user in @Model)
            {
                <tr>
                    <td>
                        @user.Id
                    </td>
                    <td>
                        @user.FullName
                    </td>
                    <td>
                        @string.Join(", ", user.UserRoles.Select(x => x.Role.Name))
                    </td>
                    <td>
                        @if (user.Status == UserStatuses.Active)
                        {
                            <span class="text-info">@user.Status</span>
                        }
                        else
                        {
                            <span class="text-danger">@user.Status</span>
                        }
                       
                    </td>
                    <td>
                        @if (user.UserRoles.Select(r => r.Role.Name).Contains(UserRoleConstants.AdminRole))
                        {
                            <a asp-action="RemoveAdmin" asp-route-userId="@user.Id" type="button" class="btn btn-sm btn-outline-dark">Remove Admin</a>
                        }
                        else
                        {
                            <a asp-action="MakeAdmin" asp-route-userId="@user.Id" type="button" class="btn btn-sm btn-outline-info">Make Admin</a>
                        }
                        @if (user.Status == UserStatuses.Active)
                        {
                            <a asp-action="BlockUser" asp-route-userId="@user.Id" type="button" class="btn btn-sm btn-outline-secondary">Block</a>
                        }
                        else
                        {
                            <a asp-action="UnlockUser" asp-route-userId="@user.Id" type="button" class="btn btn-sm btn-sm-outline-success">Unlock</a>
                        }
                        <a asp-action="DeleteUser" asp-route-userId="@user.Id" type="button" class="btn btn-sm btn-outline-danger">Delete</a>
                    </td>
                </tr>
            }
            </tbody>
        </table>
    </div>
</div>
</body>
</html>